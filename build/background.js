"use strict";function r(t){console.log("config: ",t),t.data===void 0&&(t.data={}),t.method=t.method||"post";let o={},e=null;t.formData?(e=new FormData,Object.keys(t.data).forEach(function(a){e.append(a,t.data[a])})):(o["Content-Type"]="application/json;charset=UTF-8",e=JSON.stringify(t.data)),t.method,t.url.indexOf("/MessageLists")>-1&&t.success({errno:0,msg:"succ",data:{lists:[{title:"计划A费用超标 11111",id:1},{title:"计划A费用超标 2",id:1},{title:"计划A费用超标 3",id:1},{title:"计划A费用超标 4",id:1},{title:"计划A费用超标 1",id:1},{title:"计划A费用超标 2",id:1},{title:"计划A费用超标 3",id:1},{title:"计划A费用超标 4",id:1}],limit:10,currentPage:1,totalPage:1}}),t.url.indexOf("/MessageTotal")>-1&&t.success({errno:0,msg:"succ",data:{total:20}})}const s="https://admin-aliyun-test.ludashi.com/";let l=null;chrome.runtime.onInstalled.addListener(function(){console.log(111),console.log(222)});chrome.runtime.onMessage.addListener(function(t,o,e){return chrome.tabs.query({currentWindow:!0,active:!0},function(){const{type:a}=t;if(a==="apiRequest"){let{config:n}=t;n.success=i=>{i.result="succ",e(i)},n.fail=i=>{e({result:"fail",msg:i})},r(n)}}),!0});chrome.runtime.onMessage.addListener((t,o,e)=>{if(t.type=="initPopup")return e({userInfo:l}),!0;if(t.type=="updateBadgeText")return t.text>0?chrome.action.setBadgeText({text:t.text.toString()}):chrome.action.setBadgeText({text:""}),!0});chrome.tabs.onUpdated.addListener(function(t,o,e){o.status==="complete"&&e.active&&(console.log("tab updataed!"),console.log("main url: ",s),chrome.cookies.get({url:s,name:"LUP"},a=>{console.log("background res:",a),a&&a.value?l=decodeURIComponent(a.value):l=null,console.log("backround userInfo:",l)}))});
