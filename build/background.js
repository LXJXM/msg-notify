"use strict";const o="网络连接异常，请稍后再试";function d(e){e.data===void 0&&(e.data={}),e.method=e.method||"post";let n={},a=null;e.formData?(a=new FormData,Object.keys(e.data).forEach(function(t){a.append(t,e.data[t])})):(n["Content-Type"]="application/json;charset=UTF-8",a=JSON.stringify(e.data));let s={method:e.method,headers:n,body:a};fetch(e.url,s).then(t=>t.json()).then(t=>{e.done&&e.done(),e.success&&e.success(t)}).catch(()=>{e.done&&e.done(),e.fail&&e.fail(o)})}chrome.runtime.onInstalled.addListener(function(){chrome.action.disable(),chrome.declarativeContent.onPageChanged.removeRules(void 0,()=>{const n=[{conditions:[new chrome.declarativeContent.PageStateMatcher({pageUrl:{hostSuffix:".ludashi.com"}})],actions:[new chrome.declarativeContent.ShowAction]}];chrome.declarativeContent.onPageChanged.addRules(n)})});chrome.runtime.onMessage.addListener(function(e,n,a){return chrome.tabs.query({currentWindow:!0,active:!0},function(){const{contentRequest:s}=e;if(s==="apiRequest"){let{config:t}=e;t.success=r=>{r.result="succ",a(r)},t.fail=r=>{a({result:"fail",msg:r})},d(t)}}),!0});
